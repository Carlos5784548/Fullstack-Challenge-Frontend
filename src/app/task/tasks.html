<!-- Header -->
<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
  <h2 class="text-3xl font-bold text-gray-900 tracking-tight">📋 Tus tareas</h2>
  <button (click)="logout()"
    class="bg-red-600 hover:bg-red-700 text-white px-5 py-2.5 rounded-xl shadow transition duration-200">
    Cerrar sesión
  </button>
</div>

<!-- Formulario de tarea -->
<form [formGroup]="taskForm" (ngSubmit)="submit()"
  class="grid gap-5 mb-10 bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
  
  <input formControlName="titulo" placeholder="Título" required
    class="border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500" />

  <textarea formControlName="descripcion" placeholder="Descripción"
    class="border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none min-h-[100px]"></textarea>

  <input type="date" formControlName="fechaLimite"
    class="border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500" />

  <select formControlName="estado"
    class="border border-gray-300 rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500">
    <option value="pendiente">Pendiente</option>
    <option value="en progreso">En progreso</option>
    <option value="completada">Completada</option>
  </select>

  <div class="flex gap-3 flex-wrap">
    <button type="submit"
      class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg transition shadow font-semibold">
      {{ editingTask ? 'Actualizar' : 'Crear' }}
    </button>
    <button *ngIf="editingTask" type="button" (click)="cancelEdit()"
      class="bg-gray-400 hover:bg-gray-500 text-white px-5 py-2.5 rounded-lg transition shadow font-semibold">
      Cancelar
    </button>
  </div>
</form>


<!-- Botón para ver tareas -->
<div class="flex justify-end mb-6">
  <button (click)="loadTasks()"
    class="bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2.5 rounded-lg shadow transition font-semibold">
    Ver tareas
  </button>
</div>
<!-- Lista de tareas -->
<ul class="space-y-5">
  <li *ngFor="let task of tasks"
    class="bg-white rounded-xl shadow-sm p-5 border border-gray-100 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 hover:shadow-md transition">
    
    <div class="flex-1">
      <h3 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
        📝 {{ task.titulo }}
      </h3>
      <p class="text-sm text-gray-700 mt-1">{{ task.descripcion }}</p>
      <p class="text-xs text-gray-500 mt-2">📅 Fecha límite:
        <span class="font-medium text-gray-700">{{task.fecha_limite | date:'yyyy-MM-dd' }}</span>
      </p>
      <p class="text-xs mt-1">
        📌 Estado:
        <span [ngClass]="{
          'text-yellow-600 font-semibold': task.estado === 'pendiente',
          'text-blue-600 font-semibold': task.estado === 'en progreso',
          'text-green-600 font-semibold': task.estado === 'completada'
        }">
          {{ task.estado }}
        </span>
      </p>
    </div>

    <div class="flex gap-3 justify-end">
      <button (click)="edit(task)"
        class="text-indigo-600 hover:text-indigo-800 text-sm font-medium transition">Editar</button>
      <button (click)="delete(task.id!)"
        class="text-red-600 hover:text-red-800 text-sm font-medium transition">Borrar</button>
    </div>
  </li>
</ul>
